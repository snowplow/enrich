# Copyright (c) 2014-present Snowplow Analytics Ltd. All rights reserved.
#
# This software is made available by Snowplow Analytics, Ltd.,
# under the terms of the Snowplow Limited Use License Agreement, Version 1.1
# located at https://docs.snowplow.io/limited-use-license-1.1
# BY INSTALLING, DOWNLOADING, ACCESSING, USING OR DISTRIBUTING ANY PORTION
# OF THE SOFTWARE, YOU AGREE TO THE TERMS OF SUCH LICENSE AGREEMENT.

{
  "license" {
    "accept": "false"
    "accept": ${?ACCEPT_LIMITED_USE_LICENSE}
  }
  "output": {
    "good": {
      "attributes": []
    }
    "failed": {
      "attributes": []
    }
    "bad": {
      "attributes": []
    }
  }
  "streams": {}
  "cpuParallelismFraction": 1
  "sinkParallelismFraction": 2
  "monitoring": {
    "metrics": {
      "statsd": ${snowplow.defaults.statsd}
      "statsd": {
        "prefix": "snowplow.enrich"
      }
    }
    "sentry": ${snowplow.defaults.sentry}
    "healthProbe": {
      "port": 8000
      "unhealthyLatency": "2 minutes"
    }
  }
  "assetsUpdatePeriod": "7 days"
  "jsAllowedJavaClasses": ["*"]
  "validation" : {
    "acceptInvalid": false
    "atomicFieldsLimits": {}
    "maxJsonDepth": 50
    "exitOnJsCompileError": true
  }
  "telemetry": ${snowplow.defaults.telemetry}
  "metadata": {
    "interval": 5 minutes
    "maxBodySize": 149000
  }
  "identity": {
    "concurrencyFactor": 0.75
    "retries": {
      "delay": "100 millis"
      "attempts": 3
    }
    "circuitBreaker": {
      "maxConsecutiveFailures": 5
      "failureRateThreshold": 0.5
      "failureRateWindow": "1 minute"
      "minRequestsForRateCheck": 10
      "initialBackoff": "30 seconds"
      "maxBackoff": "5 minutes"
      "backoffMultiplier": 2.0
    }
  }
  "blobClients": {}
  "decompression": {
    "maxBytesInBatch": 5242880
    "maxBytesSinglePayload": 10000000
  }
  "http": {
    "client": {
      "requestTimeout": "5 seconds"
    }
  }
  "iglu": {
    "maxRetry": 2
    "maxWait": "1 second"
  }
}
